{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/src/components/Notes/Home.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { format } from 'timeago.js';\nimport axios from 'axios';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport pencil from '../../utils/images/pencil.png';\nimport { StyledCenter, StyledButton, useStyles } from './noteStyles.js';\n\nvar Home = function Home() {\n  var classes = useStyles();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      notes = _useState2[0],\n      setNotes = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      token = _useState4[0],\n      setToken = _useState4[1];\n\n  var getNotes = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get('api/notes', {\n                headers: {\n                  Authorization: token\n                }\n              });\n\n            case 2:\n              res = _context.sent;\n              setNotes(res.data);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getNotes(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var token = localStorage.getItem('tokenStore');\n    setToken(token);\n\n    if (token) {\n      getNotes(token);\n    }\n  }, []);\n\n  var deleteNote = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n\n              if (!token) {\n                _context2.next = 5;\n                break;\n              }\n\n              _context2.next = 4;\n              return axios.delete(\"api/notes/\".concat(id), {\n                headers: {\n                  Authorization: token\n                }\n              });\n\n            case 4:\n              getNotes(token);\n\n            case 5:\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              window.location.href = \"/\";\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function deleteNote(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    className: classes.center,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, notes.map(function (note) {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: classes.root,\n      key: note._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CardActionArea, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.root,\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"date\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 33\n      }\n    }, format(note.date))), /*#__PURE__*/React.createElement(StyledCenter, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: pencil,\n      height: \"100px\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 43\n      }\n    })), /*#__PURE__*/React.createElement(CardContent, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      gutterBottom: true,\n      variant: \"h5\",\n      component: \"h2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 33\n      }\n    }, note.title), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 33\n      }\n    }, note.content))), /*#__PURE__*/React.createElement(CardActions, {\n      className: classes.between,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(StyledButton, {\n      size: \"small\",\n      variant: \"contained\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"edit/\".concat(note._id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 33\n      }\n    }, \"Edit\")), /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      variant: \"contained\",\n      color: \"secondary\",\n      onClick: function onClick() {\n        return deleteNote(note._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 29\n      }\n    }, \"Delete\")));\n  }));\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/src/components/Notes/Home.js"],"names":["React","useState","useEffect","Link","format","axios","Card","CardActionArea","CardActions","CardContent","Button","Typography","Grid","pencil","StyledCenter","StyledButton","useStyles","Home","classes","notes","setNotes","token","setToken","getNotes","get","headers","Authorization","res","data","localStorage","getItem","deleteNote","id","delete","window","location","href","center","map","note","root","_id","date","title","content","between"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { format } from 'timeago.js'\nimport axios from 'axios'\n\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\n\nimport pencil from '../../utils/images/pencil.png';\n\nimport {StyledCenter, StyledButton, useStyles} from './noteStyles.js'\n\nconst Home = ()=> {\n    const classes = useStyles();\n\n    const [notes, setNotes] = useState([])\n    const [token, setToken] = useState('')\n\n    const getNotes = async (token) => {\n        const res = await axios.get('api/notes', {\n            headers: { Authorization: token }\n        })\n        setNotes(res.data)\n    }\n\n    useEffect(() => {\n        const token = localStorage.getItem('tokenStore')\n        setToken(token)\n        if (token) {\n            getNotes(token)\n        }\n    }, [])\n\n    const deleteNote = async (id) => {\n        try {\n            if (token) {\n                await axios.delete(`api/notes/${id}`, {\n                    headers: { Authorization: token }\n                })\n                getNotes(token)\n            }\n        } catch (error) {\n            window.location.href = \"/\";\n        }\n    }\n\n    return (\n        <Grid container spacing={3} className={classes.center}>\n            {\n                notes.map(note => (\n                    <Card className={classes.root} key={note._id}>\n                        <CardActionArea>\n                            <Typography className={classes.root} variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                                <p className=\"date\">{format(note.date)}</p>\n                            </Typography>\n\n                            <StyledCenter><img src={pencil} height=\"100px\"/></StyledCenter>\n\n                            <CardContent>\n                                <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                                    {note.title}\n                                </Typography>\n\n                                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                                    {note.content}\n                                </Typography>\n\n                            </CardContent>\n                        </CardActionArea>\n                        <CardActions className={classes.between}>\n                            <StyledButton size=\"small\" variant=\"contained\" >\n                                <Link to={`edit/${note._id}`} >Edit</Link>\n                            </StyledButton>\n\n                            <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={() => deleteNote(note._id)}>\n                                Delete\n                            </Button>\n                        </CardActions>\n                    </Card>\n                ))\n            }\n\n        </Grid>\n    )\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}