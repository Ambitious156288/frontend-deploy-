{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _jsxFileName = \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/src/components/PhotoGallery/PhotoGallery.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport './PhotoGallery.css';\nimport FileUploadView from './FileUploadView';\nimport { getSingleFiles, getMultipleFiles } from '../../api/api';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { ImageGroup, Image } from 'react-fullscreen-image';\nvar StyledTitle = styled.h4(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    color:red;\\n    text-decoration: underline;\\n\"])));\nvar StyledMainTitle = styled.h3(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    color:green;\\n    text-decoration: italic;\\n\"])));\nvar StyledImg = styled.img(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n    margin: 10px;\\n    border: 1px solid black;\\n\\n    \", \" {\\n      height: 85px;\\n    }\\n\\n    \", \" {\\n      height: 60px;\\n    }\\n\"])), function (_ref) {\n  var theme = _ref.theme;\n  return theme.mq.bigTablet;\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.mq.smallTablet;\n});\n\nfunction PhotoGallery() {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      singleFiles = _useState2[0],\n      setSingleFiles = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      multipleFiles = _useState4[0],\n      setMultipleFiles = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      token = _useState6[0],\n      setToken = _useState6[1];\n\n  var getSingleFileslist = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var fileslist;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getSingleFiles({\n                headers: {\n                  Authorization: localStorage.getItem('tokenStore')\n                }\n              });\n\n            case 3:\n              fileslist = _context.sent;\n              setSingleFiles(fileslist);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function getSingleFileslist() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getMultipleFilesList = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var fileslist;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return getMultipleFiles({\n                headers: {\n                  Authorization: localStorage.getItem('tokenStore')\n                }\n              });\n\n            case 3:\n              fileslist = _context2.sent;\n              setMultipleFiles(fileslist);\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function getMultipleFilesList() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var BACKEND_API = 'https://backend-praca-inz.herokuapp.com/';\n\n  var handleDeleteImage = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return axios.delete(\"\".concat(BACKEND_API, \"api/single/\") + id);\n\n            case 2:\n              setSingleFiles(function (prev) {\n                return prev.filter(function (file) {\n                  return file._id !== id;\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleDeleteImage(_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var handleDeleteGallery = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(galleryId) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return axios.delete(\"\".concat(BACKEND_API, \"api/gallery/\") + galleryId);\n\n            case 2:\n              setMultipleFiles(function (prev) {\n                return prev.filter(function (gallery) {\n                  return gallery._id !== galleryId;\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleDeleteGallery(_x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getSingleFileslist();\n    getMultipleFilesList();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(FileUploadView, {\n    getsingle: getSingleFileslist,\n    getMultiple: getMultipleFilesList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(StyledMainTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, \"Single Files Gallery:\"), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, singleFiles.map(function (file) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 51\n      }\n    }, /*#__PURE__*/React.createElement(ImageGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 59\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"images\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 63\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      key: \"\".concat(BACKEND_API).concat(file.filePath),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: \"\".concat(BACKEND_API).concat(file.filePath),\n      alt: \"nature\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 67\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      variant: \"contained\",\n      color: \"secondary\",\n      onClick: function onClick() {\n        return handleDeleteImage(file._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 65\n      }\n    }, \"Delete\")))));\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(StyledMainTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, \"Multiple Files Gallery:\"), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, multipleFiles.map(function (element, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: element._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(StyledTitle, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 33\n      }\n    }, element.title), element.files.map(function (file, index) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(ImageGroup, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 59\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"images\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 63\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        key: \"\".concat(BACKEND_API).concat(file.filePath),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 65\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        src: \"\".concat(BACKEND_API).concat(file.filePath),\n        alt: \"nature\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 67\n        }\n      })))));\n    }), /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      variant: \"contained\",\n      color: \"secondary\",\n      onClick: function onClick() {\n        return handleDeleteGallery(element._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, \"Delete gallery\"));\n  })))));\n}\n\nexport default PhotoGallery;","map":{"version":3,"sources":["/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/src/components/PhotoGallery/PhotoGallery.js"],"names":["React","useState","useEffect","FileUploadView","getSingleFiles","getMultipleFiles","axios","styled","Grid","Box","Button","ImageGroup","Image","StyledTitle","h4","StyledMainTitle","h3","StyledImg","img","theme","mq","bigTablet","smallTablet","PhotoGallery","singleFiles","setSingleFiles","multipleFiles","setMultipleFiles","token","setToken","getSingleFileslist","headers","Authorization","localStorage","getItem","fileslist","console","log","getMultipleFilesList","BACKEND_API","handleDeleteImage","id","delete","prev","filter","file","_id","handleDeleteGallery","galleryId","gallery","map","filePath","element","index","title","files"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAO,oBAAP;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAAQC,cAAR,EAAwBC,gBAAxB,QAA+C,eAA/C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AAEA,SAASC,UAAT,EAAqBC,KAArB,QAAkC,wBAAlC;AAEA,IAAMC,WAAW,GAAGN,MAAM,CAACO,EAAV,wHAAjB;AAKA,IAAMC,eAAe,GAAER,MAAM,CAACS,EAAT,yHAArB;AAKA,IAAMC,SAAS,GAAGV,MAAM,CAACW,GAAV,+MAIT;AAAA,MAAGC,KAAH,QAAGA,KAAH;AAAA,SAAeA,KAAK,CAACC,EAAN,CAASC,SAAxB;AAAA,CAJS,EAQT;AAAA,MAAGF,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACC,EAAN,CAASE,WAAxB;AAAA,CARS,CAAf;;AAaA,SAASC,YAAT,GAAwB;AAAA;;AACtB,kBAAsCtB,QAAQ,CAAC,EAAD,CAA9C;AAAA;AAAA,MAAOuB,WAAP;AAAA,MAAoBC,cAApB;;AACA,mBAA0CxB,QAAQ,CAAC,EAAD,CAAlD;AAAA;AAAA,MAAOyB,aAAP;AAAA,MAAsBC,gBAAtB;;AACA,mBAA0B1B,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAO2B,KAAP;AAAA,MAAcC,QAAd;;AAEA,MAAMC,kBAAkB;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEG1B,cAAc,CAAC;AAAC2B,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,aAAa,EAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB;AAAlB;AAAV,eAAD,CAFjB;;AAAA;AAEfC,cAAAA,SAFe;AAGrBV,cAAAA,cAAc,CAACU,SAAD,CAAd;AAHqB;AAAA;;AAAA;AAAA;AAAA;AAKvBC,cAAAA,OAAO,CAACC,GAAR;;AALuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAlBP,kBAAkB;AAAA;AAAA;AAAA,KAAxB;;AASA,MAAMQ,oBAAoB;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAECjC,gBAAgB,CAAC;AAAC0B,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,aAAa,EAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB;AAAlB;AAAV,eAAD,CAFjB;;AAAA;AAEjBC,cAAAA,SAFiB;AAGvBR,cAAAA,gBAAgB,CAACQ,SAAD,CAAhB;AAHuB;AAAA;;AAAA;AAAA;AAAA;AAKzBC,cAAAA,OAAO,CAACC,GAAR;;AALyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAApBC,oBAAoB;AAAA;AAAA;AAAA,KAA1B;;AASA,MAAMC,WAAW,GAAG,0CAApB;;AAEF,MAAMC,iBAAiB;AAAA,yEAAG,kBAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAChBnC,KAAK,CAACoC,MAAN,CAAa,UAAGH,WAAH,mBAA8BE,EAA3C,CADgB;;AAAA;AAEtBhB,cAAAA,cAAc,CAAC,UAAAkB,IAAI;AAAA,uBAAEA,IAAI,CAACC,MAAL,CAAY,UAAAC,IAAI;AAAA,yBAAEA,IAAI,CAACC,GAAL,KAAaL,EAAf;AAAA,iBAAhB,CAAF;AAAA,eAAL,CAAd;;AAFsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAjBD,iBAAiB;AAAA;AAAA;AAAA,KAAvB;;AAKA,MAAMO,mBAAmB;AAAA,yEAAG,kBAAOC,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAClB1C,KAAK,CAACoC,MAAN,CAAa,UAAGH,WAAH,oBAA+BS,SAA5C,CADkB;;AAAA;AAExBrB,cAAAA,gBAAgB,CAAC,UAAAgB,IAAI;AAAA,uBAAEA,IAAI,CAACC,MAAL,CAAY,UAAAK,OAAO;AAAA,yBAAEA,OAAO,CAACH,GAAR,KAAgBE,SAAlB;AAAA,iBAAnB,CAAF;AAAA,eAAL,CAAhB;;AAFwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAnBD,mBAAmB;AAAA;AAAA;AAAA,KAAzB;;AAOA7C,EAAAA,SAAS,CAAC,YAAM;AACd4B,IAAAA,kBAAkB;AAClBQ,IAAAA,oBAAoB;AACrB,GAHQ,EAGN,EAHM,CAAT;AAKE,sBACE,uDACG,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACS,oBAAC,cAAD;AAAgB,IAAA,SAAS,EAAER,kBAA3B;AAA+C,IAAA,WAAW,EAAEQ,oBAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADT,eAGS,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADR,eAEQ,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFR,eAGQ,oBAAC,GAAD;AAAK,IAAA,OAAO,EAAC,MAAb;AAAoB,IAAA,QAAQ,EAAC,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACad,WAAW,CAAC0B,GAAZ,CAAgB,UAACL,IAAD;AAAA,wBACH;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACQ,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,GAAG,YAAKN,WAAL,SAAmBM,IAAI,CAACM,QAAxB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,GAAG,YAAKZ,WAAL,SAAmBM,IAAI,CAACM,QAAxB,CADL;AAEE,MAAA,GAAG,EAAC,QAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAKA,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAqB,MAAA,OAAO,EAAC,WAA7B;AAAyC,MAAA,KAAK,EAAC,WAA/C;AAA2D,MAAA,OAAO,EAAE;AAAA,eAAMX,iBAAiB,CAACK,IAAI,CAACC,GAAN,CAAvB;AAAA,OAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALA,CADF,CADJ,CADR,CADG;AAAA,GAAhB,CADb,CAHR,CAHT,eAyBS,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAFJ,eAGI,oBAAC,GAAD;AAAK,IAAA,OAAO,EAAC,MAAb;AAAoB,IAAA,QAAQ,EAAC,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKpB,aAAa,CAACwB,GAAd,CAAkB,UAACE,OAAD,EAAUC,KAAV;AAAA,wBACf;AAAK,MAAA,GAAG,EAAED,OAAO,CAACN,GAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAcM,OAAO,CAACE,KAAtB,CADJ,EAEKF,OAAO,CAACG,KAAR,CAAcL,GAAd,CAAkB,UAACL,IAAD,EAAOQ,KAAP;AAAA,0BACH;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACU,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAI,QAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,GAAG,YAAKd,WAAL,SAAmBM,IAAI,CAACM,QAAxB,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AACE,QAAA,GAAG,YAAKZ,WAAL,SAAmBM,IAAI,CAACM,QAAxB,CADL;AAEE,QAAA,GAAG,EAAC,QAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,CADJ,CADV,CADG;AAAA,KAAlB,CAFL,eAgBA,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAqB,MAAA,OAAO,EAAC,WAA7B;AAAyC,MAAA,KAAK,EAAC,WAA/C;AAA2D,MAAA,OAAO,EAAE;AAAA,eAAMJ,mBAAmB,CAACK,OAAO,CAACN,GAAT,CAAzB;AAAA,OAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAhBA,CADe;AAAA,GAAlB,CADL,CAHJ,CAzBT,CADH,CADF;AAwDD;;AAED,eAAevB,YAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './PhotoGallery.css';\nimport FileUploadView from './FileUploadView';\nimport {getSingleFiles, getMultipleFiles} from '../../api/api';\nimport axios from 'axios'\n\nimport styled from 'styled-components';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\n\nimport { ImageGroup, Image } from 'react-fullscreen-image';\n\nconst StyledTitle = styled.h4`\n    color:red;\n    text-decoration: underline;\n`;\n\nconst StyledMainTitle= styled.h3`\n    color:green;\n    text-decoration: italic;\n`;\n\nconst StyledImg = styled.img`\n    margin: 10px;\n    border: 1px solid black;\n\n    ${({ theme }) => theme.mq.bigTablet} {\n      height: 85px;\n    }\n\n    ${({ theme }) => theme.mq.smallTablet} {\n      height: 60px;\n    }\n`;\n\nfunction PhotoGallery() {\n  const [singleFiles, setSingleFiles] = useState([]);\n  const [multipleFiles, setMultipleFiles] = useState([]);\n  const [token, setToken] = useState('')\n\n  const getSingleFileslist = async () => {\n    try {\n        const fileslist = await getSingleFiles({headers: { Authorization:  localStorage.getItem('tokenStore') }});\n        setSingleFiles(fileslist);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  \n  const getMultipleFilesList = async () => {\n    try {\n        const fileslist = await getMultipleFiles({headers: { Authorization:  localStorage.getItem('tokenStore') }});\n        setMultipleFiles(fileslist);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const BACKEND_API = 'https://backend-praca-inz.herokuapp.com/'\n\nconst handleDeleteImage = async (id)=>{\n    await axios.delete(`${BACKEND_API}api/single/` + id)\n    setSingleFiles(prev=>prev.filter(file=>file._id !== id))\n}\n\nconst handleDeleteGallery = async (galleryId)=>{\n    await axios.delete(`${BACKEND_API}api/gallery/` + galleryId)\n    setMultipleFiles(prev=>prev.filter(gallery=>gallery._id !== galleryId))\n}\n\n\n\nuseEffect(() => {\n  getSingleFileslist();\n  getMultipleFilesList();\n}, []);\n\n  return (\n    <>\n       <Grid container spacing={3}>\n                <FileUploadView getsingle={getSingleFileslist} getMultiple={getMultipleFilesList}/>\n\n                <Grid item xs={6}>\n                        <hr/>\n                        <StyledMainTitle>Single Files Gallery:</StyledMainTitle>\n                        <Box display=\"flex\" flexWrap=\"wrap\">\n                                    {singleFiles.map((file) => \n                                                  <div className=\"container\">\n                                                          <ImageGroup >\n                                                              <ul className=\"images\">\n                                                                <li key={`${BACKEND_API}${file.filePath}`}>\n                                                                  <Image \n                                                                    src={`${BACKEND_API}${file.filePath}`}\n                                                                    alt=\"nature\"\n                                                                  />\n                                                                <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={() => handleDeleteImage(file._id)}>Delete</Button>\n                                                                </li>\n                                                              </ul>\n                                                          </ImageGroup>\n                                                  </div>\n                                    )}\n                        </Box>\n                </Grid>\n\n                <Grid item xs={6}>\n                    <hr/>\n                    <StyledMainTitle>Multiple Files Gallery:</StyledMainTitle>\n                    <Box display=\"flex\" flexWrap=\"wrap\">\n                        {multipleFiles.map((element, index) =>\n                            <div key={element._id}>\n                                <StyledTitle>{element.title}</StyledTitle>\n                                {element.files.map((file, index) =>\n                                                <div className=\"container\">\n                                                          <ImageGroup >\n                                                              <ul className=\"images\">\n                                                                <li key={`${BACKEND_API}${file.filePath}`}>\n                                                                  <Image \n                                                                    src={`${BACKEND_API}${file.filePath}`}\n                                                                    alt=\"nature\"\n                                                                  />\n                                                                </li>\n                                                              </ul>\n                                                          </ImageGroup>\n                                                </div>\n                                )}\n                            <Button size=\"small\" variant=\"contained\" color=\"secondary\" onClick={() => handleDeleteGallery(element._id)}>Delete gallery</Button>\n                            </div>\n                        )}\n                    </Box>\n                </Grid>\n       </Grid>\n    </>\n  );\n}\n\nexport default PhotoGallery;\n"]},"metadata":{},"sourceType":"module"}