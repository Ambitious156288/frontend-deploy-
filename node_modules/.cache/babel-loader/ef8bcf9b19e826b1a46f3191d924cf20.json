{"ast":null,"code":"import _regeneratorRuntime from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState } from 'react';\nimport axios from 'axios';\n\nvar useLogin = function useLogin(_ref) {\n  var setIsLogin = _ref.setIsLogin;\n\n  var _useState = useState({\n    name: '',\n    email: '',\n    password: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      err = _useState4[0],\n      setErr = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      onLogin = _useState6[0],\n      setOnLogin = _useState6[1];\n\n  var onChangeInput = function onChangeInput(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setUser(_objectSpread(_objectSpread({}, user), {}, _defineProperty({}, name, value)));\n    setErr('');\n  };\n\n  var registerSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.post('/users/register', {\n                username: user.name,\n                email: user.email,\n                password: user.password\n              });\n\n            case 4:\n              res = _context.sent;\n              setUser({\n                name: '',\n                email: '',\n                password: ''\n              });\n              setErr(res.data.msg);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              _context.t0.response.data.msg && setErr(_context.t0.response.data.msg);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function registerSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var loginSubmit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.post('/users/login', {\n                email: user.email,\n                password: user.password\n              });\n\n            case 4:\n              res = _context2.sent;\n              setUser({\n                name: '',\n                email: '',\n                password: ''\n              });\n              localStorage.setItem('tokenStore', res.data.token);\n              setIsLogin(true);\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              _context2.t0.response.data.msg && setErr(_context2.t0.response.data.msg);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 10]]);\n    }));\n\n    return function loginSubmit(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return {\n    loginSubmit: loginSubmit,\n    user: user,\n    onChangeInput: onChangeInput,\n    onLogin: onLogin,\n    setOnLogin: setOnLogin,\n    err: err,\n    registerSubmit: registerSubmit\n  };\n};\n\nexport default useLogin;","map":{"version":3,"sources":["/Users/kkalwik/Desktop/test/fix-praca-inz/frontend/src/components/Login/useLogin.hook.js"],"names":["useState","axios","useLogin","setIsLogin","name","email","password","user","setUser","err","setErr","onLogin","setOnLogin","onChangeInput","e","target","value","registerSubmit","preventDefault","post","username","res","data","msg","response","loginSubmit","localStorage","setItem","token"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\n\nconst useLogin = ({ setIsLogin }) => {\n  const [user, setUser] = useState({ name: '', email: '', password: '' });\n  const [err, setErr] = useState('');\n  const [onLogin, setOnLogin] = useState(true);\n\n  const onChangeInput = e => {\n    const { name, value } = e.target;\n    setUser({ ...user, [name]: value });\n    setErr('');\n  };\n\n  const registerSubmit = async e => {\n    e.preventDefault();\n    try {\n      const res = await axios.post('/users/register', {\n        username: user.name,\n        email: user.email,\n        password: user.password,\n      });\n      setUser({ name: '', email: '', password: '' });\n      setErr(res.data.msg);\n    } catch (err) {\n      err.response.data.msg && setErr(err.response.data.msg);\n    }\n  };\n\n  const loginSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post('/users/login', {\n        email: user.email,\n        password: user.password,\n      });\n      setUser({ name: '', email: '', password: '' });\n      localStorage.setItem('tokenStore', res.data.token);\n      setIsLogin(true);\n    } catch (err) {\n      err.response.data.msg && setErr(err.response.data.msg);\n    }\n  };\n\n    return { \n        loginSubmit,\n        user, \n        onChangeInput,\n        onLogin, \n        setOnLogin, \n        err,\n        registerSubmit\n    };\n};\n\nexport default useLogin;"]},"metadata":{},"sourceType":"module"}